<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>字体测试页面</title>
    
    <!-- 原始字体引用 -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Montserrat:300%7CQuestrial&display=swap">
    
    <!-- 本地字体回退 -->
    <link rel="stylesheet" href="css/local-fonts.css">
    
    <style>
        body {
            font-family: "Montserrat", "Microsoft YaHei", "微软雅黑", sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .font-test {
            font-size: 18px;
            margin: 10px 0;
        }
        
        .heading-test {
            font-family: "Questrial", "Microsoft YaHei", "微软雅黑", sans-serif;
            font-size: 24px;
            font-weight: bold;
            margin: 15px 0;
        }
        
        .brand-test {
            font-family: "Microsoft YaHei UI", "Microsoft YaHei", "微软雅黑", sans-serif;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .success { background-color: #d4edda; color: #155724; }
        .warning { background-color: #fff3cd; color: #856404; }
        .error { background-color: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1 class="heading-test">字体显示测试页面</h1>
    
    <div class="test-section">
        <h2>基础文字测试</h2>
        <div class="font-test">这是使用Montserrat字体的中文测试文字：传颂 传递工艺，赞颂匠心</div>
        <div class="font-test">English text with Montserrat font: Creative Design Studio</div>
    </div>
    
    <div class="test-section">
        <h2 class="heading-test">标题字体测试</h2>
        <div class="heading-test">非遗的匠心传承着历史的辉煌</div>
        <div class="heading-test">Our Creative Portfolio</div>
    </div>
    
    <div class="test-section">
        <h2>品牌文字测试</h2>
        <div class="brand-test">传颂 - Chuan Sun</div>
        <div class="brand-test">传递工艺，赞颂匠心</div>
    </div>
    
    <div class="test-section">
        <h2>特殊字符测试</h2>
        <div class="font-test">
            常用汉字：的一是在不了有和人这中大为上个国我以要他时来用们生到作地于出就分对成会可主发年动同工也能下过子说产种面而方后多定行学法所民得经十三之进着等部度家电力里如水化高自二理起小物现实加量都两体制机当使点从业本去把性好应开它合还因由其些然前外天政四日那社义事平形相全表间样与关各重新线内数正心反你明看原又么利比或但质气第向道命此变条只没结解问意建月公无系军很情者最立代想已通并提直题党程展五果料象员革位入常文总次品式活设及管特件长求老头基资边流路级少图山统接知较将组见计别她手角期根论运农指几九区强放决西被干做必战先回则任取据处队南给色光门即保治北造百规热领七海口东导器压志世金增争济阶油思术极交受联什认六共权收证改清己美再采转更单风切打白教速花带安场身车例真务具万每目至达走积示议声报斗完类八离华名确才科张信马节话米整空元况今集温传土许步群广石记需段研界拉林律叫且究观越织装影算低持音众书布复容儿须际商非验连断深难近矿千周委素技备半办青省列习响约支般史感劳便团往酸历市克何除消构府称太准精值号率族维划选标写存候毛亲快效斯院查江型眼王按格养易置派层片始却专状育厂京识适属圆包火住调满县局照参红细引听该铁价严"
        </div>
    </div>
    
    <div id="font-status" class="status warning">检测字体加载状态中...</div>
    
    <div class="test-section">
        <h2>系统信息</h2>
        <div id="system-info"></div>
        <div id="font-info"></div>
    </div>

    <script>
        // 字体检测脚本
        function checkFontLoading() {
            const statusDiv = document.getElementById('font-status');
            const systemInfo = document.getElementById('system-info');
            const fontInfo = document.getElementById('font-info');
            
            // 检测系统
            const userAgent = navigator.userAgent.toLowerCase();
            let system = '';
            if (userAgent.includes('windows')) system = 'Windows';
            else if (userAgent.includes('mac')) system = 'macOS';
            else if (userAgent.includes('linux')) system = 'Linux';
            else system = '未知系统';
            
            systemInfo.innerHTML = `<strong>操作系统:</strong> ${system}`;
            
            // 检测字体
            function isFontAvailable(fontName) {
                const testElement = document.createElement('span');
                testElement.style.position = 'absolute';
                testElement.style.visibility = 'hidden';
                testElement.style.fontSize = '72px';
                testElement.style.fontFamily = 'monospace';
                testElement.innerHTML = 'mmmmmmmmmmlli';
                
                document.body.appendChild(testElement);
                const originalWidth = testElement.offsetWidth;
                
                testElement.style.fontFamily = fontName + ', monospace';
                const newWidth = testElement.offsetWidth;
                
                document.body.removeChild(testElement);
                
                return originalWidth !== newWidth;
            }
            
            const montserratAvailable = isFontAvailable('Montserrat');
            const questrialAvailable = isFontAvailable('Questrial');
            
            let statusClass = 'success';
            let statusText = '字体加载正常';
            
            if (!montserratAvailable && !questrialAvailable) {
                statusClass = 'warning';
                statusText = 'Google字体加载失败，已自动回退到系统字体';
            } else if (!montserratAvailable || !questrialAvailable) {
                statusClass = 'warning';
                statusText = '部分字体加载失败，已启用混合字体方案';
            }
            
            statusDiv.className = `status ${statusClass}`;
            statusDiv.textContent = statusText;
            
            fontInfo.innerHTML = `
                <strong>字体检测结果:</strong><br>
                Montserrat: ${montserratAvailable ? '✅ 可用' : '❌ 不可用'}<br>
                Questrial: ${questrialAvailable ? '✅ 可用' : '❌ 不可用'}<br>
                <strong>当前字体:</strong> ${getComputedStyle(document.body).fontFamily}
            `;
        }
        
        // 页面加载完成后检测
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(checkFontLoading, 1000);
            });
        } else {
            setTimeout(checkFontLoading, 1000);
        }
    </script>
</body>
</html>
